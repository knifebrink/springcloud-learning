spring cloud的学习

主要基于[mall-cloud-leanring](http://www.macrozheng.com/#/cloud/springcloud)的学习，这个项目是真的顶



学习目标：走通所有的流程和关键部件，然后开始背题。

好像没两天学不完

Eureka

应该是注册管理相关的，分为server和client，功能感觉还是比较多的。



ribbon

负载均衡的服务调用组件

负责负载均衡，即A服务通过ribbon调用多个B服务，ribbon根据负载均衡策略调用哪个B服务。

有多种负载均衡策略。默认应该是平均分配



Hystrix

断路器、服务容错组件

服务发生异常时，进行服务降级，不能让不能使用的服务故障导致更大的问题。

缓存请求，和请求合并。

感觉就是有点像中间拦截，行吧，这么一想，好像都是中间拦截，只是不同的功能而已。



Feign

基于Ribbon和Hystrix的声明式服务调用组件

就是集成了Ribbon和Hysrix，更方便使用，即负载均衡+容错



Zuul

API网关组件

API网关为微服务架构中的服务提供了统一的访问入口，客户端通过API网关访问相关服务

对请求进行路由和过滤，有点类似门面模式，访问入口，也实现了负载均衡、容错等功能

集成了Ribbon和Hystrix的功能



Config

集中配置管理工具，分布式系统中统一的外部配置管理，默认使用Git来存储配置，可以支持客户端配置的刷新及加密、解密操作。

分为服务端和客户端。可获取git仓库上的配置文件，分布式外部配置。



Bus

消息总线

用于传播集群状态变化的消息总线，使用轻量级消息代理链接分布式系统中的节点，可以用来动态刷新集群中的服务配置。

支持两种消息代理，RabbitMQ和kafka



Sleuth

SpringCloud应用程序的分布式请求链路跟踪，支持使用Zipkin、HTrace和基于日志（例如ELK）的跟踪。

可结合Zipkin和Elasticsearch使用，Zipkin重启后信息会丢失



Consul

服务治理和配置中心

感觉是集成了很多功能，Eureka的加强版

由于本地限制，故做不完整实验



Gateway 

新一代API网关服务

强大的路由与过滤器功能（感觉过滤器更像拦截器）

感觉是加强版的Zull



Admin

微服务应用监控

可以监控很多的信息，分为服务提供，和客户端

登录网页即可监控



OAuth2

OAuth 2.0是用于授权的行业标准协议。不限于微服务

不是很明白oauth2可以使用两种存储方式存储令牌，一种是Redis，另一种是JWT，问题是，JWT生成的字符串又是存在哪呢。返回的令牌不是还是得自己存储。算了先记忆好了。

四种模式，其中两种是

授权码模式：客户端将用户导向认证服务器，用户登录并授权，返回授权码给客户端，客户通过认证服务器获取访问令牌，带令牌请求接口

密码模式：客户端直接带着用户的用户名和密码从认证服务器中获取令牌

关键在于认清这之间的角色。有时候一个程序扮演多个角色

可实现单点登录



Alibaba Nacos 

Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。

感觉就是另一个公司的Consul吧。也是一个带配置的，加强版的Eureka









